\section{Energy Consumption}
This section presents the definition of energy, what are the relevant hardware components on energy consumption, which methods exist to measure energy consumption, and more detailed insight into the tools used in this work.

\subsection{Energy and Power} \label{energypower} 
In order to understand how energy consumption can be measured, we must first understand what power is, what energy is and how different it is.

The scientific definition of Power is the total workload or energy transferred divided by the time interval. In this context, power is the amount of energy consumed per unit of time. According to The international system of units~\cite{taylor_1991}, the universal unit used for power is Watts (W) or Joules/s. Energy is the total workload of a system during a period of time and is the unit used for Energy is Joules (J).

The Power can be calculated in two ways, the first is when we know the total energy and the time interval,

\begin{equation}
P = \frac{E}{\Delta t} 
\end{equation}

The other possible way of calculating is through Voltage and current intensity. Voltage is defined to be the potential energy of two different points and the Unit is Volts and Current intensity is the magnitude of an electric current as measured by the quantity of electricity crossing a specified area of equipotential surface per unit time and unit of measurement is Amperes (A). 

With this we can calculate the power by this formula:

\begin{equation}\label{eq:pvi}
P = V I
\end{equation}

With this two formulas we can deduce this formula to calculate the energy,

\begin{equation}\label{eq:energyfinal}
E = V I \Delta t
\end{equation}

\input{Chapters/energytable}

The formulas below gonna be important because without them we can't measure energy by a direct approach.

\subsection{Types of Energy Consumption}
To measure the total and individual components energy consumption, first we have to divide the energy consumption in different groups. There are several ways to group a device's overall energy consumption by measuring the level of use of hardware resources in the system. This analysis can be separate the energy consumption of a system into two categories: static energy consumption and dynamic energy consumption.

\begin{itemize}
    \item \textbf{Static Consumption:} is the base consumption needed to ensure that the system is ready, and able to respond to any user need quickly and effectively. This energy is consumed by the system regardless of the state of operation. This includes energy consumed inactive by the disks, network interfaces, \gls{cpu}, caches, memory, motherboard, etc. This category also includes the energy needed to maintain the basic requirements of the operating system and other tasks in progress~\cite{portela2016}.
    
   \item \textbf{Dynamic Consumption:} This refers to the basic consumption necessary for an operation requested by the user of the system. Dynamic Energy includes the energy consumed by the \gls{cpu}, the extraordinary operations on the \gls{dram}, the disk when searching, reading or/and writing data, the network interface when receiving and transmitting data packets, and other needs to respond to user requests when executing instructions. Dynamic power consumption values mainly depend on the type of workload that runs on the machine. ~\cite{portela2016}.
  \end{itemize}
  

\subsection{Relevant Hardware Components}

Before we design a model of energy consumption, first we need to understand which hardware components are relevant to global consumption. This is a relevant point because while static consumption has an unchanging base value and is easy to capture, dynamic consumption varies constantly and sometimes it becomes difficult to find any coherence in that variation. 

According to several studies carried out during the last 15 years, it shows that the main subsystems that generate dynamic energy consumption are the CPU, the Memory, and Disk~\cite{portela2016}. According to google research \cite{google} provided some insight into how energy is used in modern IT equipment at the time and got by breaking down the peak power usage of one generation of WSCs deployed at Google in 2007 categorized by main component group, they got that using modern data center using late 2012 generation servers the 3 main hardware components besides cooling components on energy total consumption was \gls{cpu} with 42\%, Disks with 14,3\% and \gls{dram} with 12,3\%. Also \citeauthor{kensal} mentions in an article that the subsystems with more impact on the dynamic consumption are CPU, memory and disk, represent, respectively, 58\%, 28\% and 14\% .

With this information, we can conclude that our energy model must be around this 3 components and it also facilitates the study of the causes of energy variations in the DBMS. 
%Google, L. A. Barroso e U. HoÌˆlzle, The Datacenter as a Computer: AnIntroduction to the Design of Warehouse-Scale Machines, vol. 6,Morgan & Claypool Publishers, 2009. 


\subsection{Methods To Measure Energy Consumption}


With the unit of measure energy determined in section \ref{energypower}, in this subsection it will be explain the three ways that energy can be measure. This methods are \cite{ardito2019methodological}:

\begin{itemize}
    \item \textbf{Instant Power Measurement:} The instantaneous current consumed by the unit is determined by his technique and then multiplied by the voltage. The integral gives the energy value over a period. If the sampling frequency is high, instant power measurements are reliable, but they require physical instrumentation. This method generally works at the level of the system, although measuring the component-level of hardware is possible.
    \item \textbf{Time Measurement:} Another way to collect the energy consumption of a device is through measurement of time. Assuming a constant consumption over time, the speed at which energy is depleted depends on the power consumption of the device. 
    \item \textbf{Model Estimation:} Energy consumption calculations in this method are measured in a way where a power consumption of a specific computer is connected to internal resource use indicators, such as \gls{cpu} states, commands, memory or disk access, and network adapters. This method utilizes machine calls to estimate the usage of resources.
\end{itemize}

\subsection{Energy Measurement Tools}
In this subsection, it is shown which Energy measurement tools are used in this study and a quick understanding of how they work.

\subsubsection{RAPL}
\input{Design/rapl}
\subsubsection{Arduino}
\input{Design/arduino}
